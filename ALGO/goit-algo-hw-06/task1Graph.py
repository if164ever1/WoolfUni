import networkx as nx
import matplotlib.pyplot as plt

metro = nx.Graph()

stations = [
    "Академмістечко", "Житомирська", "Святошин", "Нивки", "Берестейська",
    "Шулявська", "Політехнічний інститут", "Вокзальна", "Університет",
    "Театральна", "Хрещатик", "Арсенальна", "Дніпро", "Гідропарк",
    "Лівобережна", "Дарниця", "Чернігівська", "Лісова",
    "Почайна", "Тараса Шевченка", "Контрактова площа", "Площа Українських Героїв"
]

metro.add_nodes_from(stations)

red_line = [
    ("Академмістечко", "Житомирська"), ("Житомирська", "Святошин"), 
    ("Святошин", "Нивки"), ("Нивки", "Берестейська"), 
    ("Берестейська", "Шулявська"), ("Шулявська", "Політехнічний інститут"),
    ("Політехнічний інститут", "Вокзальна"), ("Вокзальна", "Університет"),
    ("Університет", "Театральна"), ("Театральна", "Хрещатик"),
    ("Хрещатик", "Арсенальна"), ("Арсенальна", "Дніпро"),
    ("Дніпро", "Гідропарк"), ("Гідропарк", "Лівобережна"),
    ("Лівобережна", "Дарниця"), ("Дарниця", "Чернігівська"),
    ("Чернігівська", "Лісова")
]

green_line = [
    ("Почайна", "Тараса Шевченка"), ("Тараса Шевченка", "Контрактова площа"),
    ("Контрактова площа", "Площа Українських Героїв"), ("Площа Українських Героїв", "Театральная")
]

metro.add_edges_from(red_line)
metro.add_edges_from(green_line)

transfers = [("Театральна", "Театральная")]
metro.add_edges_from(transfers)

plt.figure(figsize=(12, 8))
pos = nx.spring_layout(metro, seed=42)
nx.draw(metro, pos, with_labels=True, node_color='lightblue', 
        edge_color='gray', node_size=800, font_size=10)
plt.title("Модель київського метро")
plt.show()

print("\nОсновні характеристики графа:")
print(f"Кількість станцій (вершин): {metro.number_of_nodes()}")
print(f"Кількість з'єднань (ребер): {metro.number_of_edges()}")
print("\nСтупені вершин (кількість з'єднань кожної станції):")
for station in stations:
    print(f"{station}: {metro.degree(station)}")

print("\nДодаткові метрики:")
print(f"Середній ступінь вершин: {sum(dict(metro.degree()).values()) / metro.number_of_nodes()}")
print(f"Густина графа: {nx.density(metro):.4f}")
if nx.is_connected(metro):
    print(f"Діаметр графа: {nx.diameter(metro)}")
else:
    print("Граф не є зв'язним (має кілька компонентів зв'язності)")